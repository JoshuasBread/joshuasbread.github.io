<!DOCTYPE HTML>
<html>
<head>
    <title>Joshua's Bread</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="assets/css/main.css"/>
    <script src="bundle.js"></script>
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css"/>
    </noscript>
</head>
<body class="is-preload">
<!-- Wrapper -->
<div id="wrapper">
    <!-- Header -->
    <header id="header" class="alt">
        <span class="logo"><img src="images/logo.svg" alt="Logo" style="max-width:250px;width:100%"/></span>
        <h1>Joshua's Bread</h1>
        <p>The dough is rising...<br/>Very nice</p>
    </header>
    <!-- Main -->
    <div id="main" style="max-width:1200px;">
        <section id="first" class='main'>
            <div class="table-wrapper">
                <header class="major">
                    <h2>Available breads</h2>
                    <p>Straight from the Lord's mouth into your own</p>
                </header>
                <table>
                    <tbody id="items-table">
                    <tr>
                        <td><span class="image"><img class="thumbnail" src="images/pic01.jpg" alt=""
                                                     style="max-width:150px;width:100%"/></span></td>
                        <td>
                            <strong id="Focaccia-name">Focaccia</strong>
                            <br>
                            <em>Garlic-rosemary focaccia with garlic-infused olive oil.</em>
                        </td>
                        <td>
                            <p id="Focaccia-price" style="text-align:center">$19.99</p>
                            <select name="Focaccia-count" id="Focaccia-count" class="select-count"
                                    onchange="updateCart()">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><span class="image"><img class="thumbnail" src="images/pic01.jpg" alt=""
                                                     style="max-width:150px;width:100%"/></span></td>
                        <td>
                            <strong id="Baguette-name">Baguette</strong>
                            <br>
                            <em>Garlic-rosemary focaccia with garlic-infused olive oil.</em>
                        </td>
                        <td>
                            <p id="Baguette-price" style="text-align:center">$12.99</p>
                            <select name="Baguette-count" id="Baguette-count" class="select-count"
                                    onchange="updateCart()">
                                <option value=0>0</option>
                                <option value=1>1</option>
                            </select>
                        </td>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td style="text-align: right;"><h2>Cart</h2></td>
                    </tr>
                    <tr>

                        <td style="text-align: right;">
                            <span id="selected-items-count"></span>
                        </td>

                        <td>
                            <span id="selected-items-name"></span>
                        </td>

                        <td id="selected-items-price">

                        </td>

                    </tr>
                    <tr style="font-weight: bold">
                        <td colspan="1"></td>
                        <td style="text-align: right;">Total</td>
                        <td id="selected-items-total-price">
                            $0.00
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </section>

    </div>
    <!-- Footer -->
    <footer id="footer">
        <section>
            <h2>Aliquam sed mauris</h2>
            <p>Sed lorem ipsum dolor sit amet et nullam consequat feugiat consequat magna adipiscing tempus etiam dolore
                veroeros. eget dapibus mauris. Cras aliquet, nisl ut viverra sollicitudin, ligula erat egestas velit,
                vitae tincidunt odio.
            </p>
        </section>
        <section>
            <h2>Etiam feugiat</h2>
            <dl class="alt">
                <dt>Address</dt>
                <dd>1234 Somewhere Road &bull; Nashville, TN 00000 &bull; USA</dd>
                <dt>Phone</dt>
                <dd>(000) 000-0000 x 0000</dd>
                <dt>Email</dt>
                <dd><a href="#">information@untitled.tld</a></dd>
            </dl>
        </section>
    </footer>
</div>
<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/js/sheetsAPI.js"></script>
<script>
    // Returns a JSON of bread-data.
    const sheetsData = getSheetsData();
    const itemNames = sheetsData.map(data => data.name);
    const domIds = itemNamesToDOMIds(itemNames);

    function updateCart() {
        let itemNames = "";
        let itemCounts = "";
        let itemPrices = "";
        let totalItemPrices = 0;

        for (const domId of domIds) {
            const {name: nameId, count: countId, price: priceId} = domId;
            const itemCount = parseInt(document.getElementById(countId).value);

            if (!itemCount) {
                continue;
            }

            const itemName = document.getElementById(nameId).innerText
            const itemPrice = document.getElementById(priceId).innerText.split('$')[1];

            itemNames += `${itemName}<br>`;
            itemCounts += `x${itemCount}<br>`;
            itemPrices += `$${itemPrice * itemCount}<br>`

            totalItemPrices += (itemPrice * itemCount);
        }

        document.getElementById("selected-items-name").innerHTML = itemNames;
        document.getElementById("selected-items-count").innerHTML = itemCounts;
        document.getElementById("selected-items-price").innerHTML = itemPrices;
        document.getElementById("selected-items-total-price").innerText = `$${totalItemPrices}`;
    }


</script>
</body>
</html>